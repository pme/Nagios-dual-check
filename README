Nagios dual check
~~~~~~~~~~~~~~~~~
2012.03.04. Still in experimental state!

Files:
  check_dual.pl

Description:
	It is often necessary to run checks for a host with dual IP address. The
	check_dual.pl is an attempt to simplify this task. The Nagios config is allow
	us to write anything in a 'define host' 'address' directive. Let's write both
	addresses separated by comma and similarly to the check_nrpe stanza, use the
	check_dual command as described below.

	define host {
		host_name		host1
		address			1.2.3.4,5.6.7.8
		check_command check_dual!$USER1$/check_ping!-w 100.0,20%!-c 500.0,60%
		...
	}

	define command {
		command_name	check_dual
		command_line	/usr/local/nagios/libexec/check_dual.pl -H $HOSTADDRESS$ -c $ARG1$ -- \
		  $ARG2$ $ARG3$ $ARG4$ $ARG5$ $ARG6$ $ARG7$ $ARG8$ $ARG9$
	}

	check_dual.pl itself contains two truth table to calculate the resulting
	state. There are two kind of checks:
		'one of two' - usually nrpe checks, these checks are ok even if they can be
		               done through only one of the ip addresses. eg. check_nrpe!check_disk
		'two of two' - check on both ip address should be ok. eg. check_ping of the
		               hosts's ip addresses.
  See the truth tables in check_dual.pl source.


